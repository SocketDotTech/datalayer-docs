"use strict";(self.webpackChunkdatalayer_docs=self.webpackChunkdatalayer_docs||[]).push([[4519],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>h});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=o.createContext({}),u=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=u(e.components);return o.createElement(c.Provider,{value:n},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},p=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=u(t),p=r,h=d["".concat(c,".").concat(p)]||d[p]||g[p]||a;return t?o.createElement(h,i(i({ref:n},s),{},{components:t})):o.createElement(h,i({ref:n},s))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=p;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<a;u++)i[u]=t[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}p.displayName="MDXCreateElement"},1813:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var o=t(7462),r=(t(7294),t(3905));const a={id:"configuring-plugs",title:"Configuring Plugs",sidebar_position:1},i=void 0,l={unversionedId:"Build/contract-setup/configuring-plugs",id:"Build/contract-setup/configuring-plugs",title:"Configuring Plugs",description:"Connecting your cross-chain smart contracts (i.e. Plugs) is as easy as creating a Plug on chain A and chain B, connecting both Plugs to their chain's canonical Socket deployment, and configuring both Plugs to reference one another.",source:"@site/docs/Build/contract-setup/configuring-plugs.md",sourceDirName:"Build/contract-setup",slug:"/Build/contract-setup/configuring-plugs",permalink:"/Build/contract-setup/configuring-plugs",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"configuring-plugs",title:"Configuring Plugs",sidebar_position:1},sidebar:"defaultSidebar",previous:{title:"Speed Run DL",permalink:"/Build/hello-world"},next:{title:"Sending messages",permalink:"/Build/contract-setup/sending"}},c={},u=[{value:"Configuring Plug Parameters",id:"configuring-plug-parameters",level:2},{value:"Connecting your Plugs",id:"connecting-your-plugs",level:2},{value:"Testing your connection",id:"testing-your-connection",level:2}],s={toc:u},d="wrapper";function g(e){let{components:n,...t}=e;return(0,r.kt)(d,(0,o.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Connecting your cross-chain smart contracts (i.e. Plugs) is as easy as creating a Plug on chain A and chain B, connecting both Plugs to their chain's canonical Socket deployment, and configuring both Plugs to reference one another. "),(0,r.kt)("p",null,"Before getting started on configuring your Plugs, here are a few things to keep in mind: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Socket allows only Plugs to update this configuration/connection at any point"),(0,r.kt)("li",{parentName:"ul"},"Connection should be permissioned at the Plug level by either ",(0,r.kt)("inlineCode",{parentName:"li"},"owner keys"),", protocol governance. Or, to make the connection immutable, you can block re-connection forever"),(0,r.kt)("li",{parentName:"ul"},"Malicious configuration while connecting to Socket could cause unintended actions."),(0,r.kt)("li",{parentName:"ul"},"Connections are pair-wise, i.e you connect PlugA on ChainA to PlugB on ChainB. To extend your deployment to chain C, you would pair a PlugC on ChainC with Plugs on ChainA and ChainB respectively")),(0,r.kt)("p",null,"You can read more about Plugs ",(0,r.kt)("a",{parentName:"p",href:"/Learn/Components/Plugs"},"here"),". Once connected, you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"Outbound")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Inbound")," methods to send and receive messages."),(0,r.kt)("h2",{id:"configuring-plug-parameters"},"Configuring Plug Parameters"),(0,r.kt)("p",null,"Plugs should be deployed on respective chains before they can be connected to their sibling Plugs deployed on other chains. Once you are ready with Plugs deployed on the networks you want to work with, it's time to get Plugged!"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Here's the parameters required for connection")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameters"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"siblingChainSlug"),(0,r.kt)("td",{parentName:"tr",align:null},"ChainSlug of the network the sibling plug is deployed on, you can find all ",(0,r.kt)("a",{parentName:"td",href:"/dev-resources/deployment-addresses"},"chainSlugs here"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"siblingPlug"),(0,r.kt)("td",{parentName:"tr",align:null},"Address of the plug deployed on the sibling chain")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"inboundSwitchboard"),(0,r.kt)("td",{parentName:"tr",align:null},"Switchboard address used for receiving messages from siblingPlug")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"outboundSwitchboard"),(0,r.kt)("td",{parentName:"tr",align:null},"Switchboard address used for sending messages to siblingPlug")))),(0,r.kt)("p",null,"You can find addresses for all verified Switchboards and Socket contracts in ",(0,r.kt)("a",{parentName:"p",href:"/dev-resources/deployment-addresses"},"Deployments")),(0,r.kt)("h2",{id:"connecting-your-plugs"},"Connecting your Plugs"),(0,r.kt)("p",null,"Once you have the Socket address you are connecting to, you just need to call the ",(0,r.kt)("inlineCode",{parentName:"p"},"connect")," method on it to configure your Plug on that chain. Remember, you need to call ",(0,r.kt)("inlineCode",{parentName:"p"},"connect")," on both the chains you want to work with."),(0,r.kt)("p",null,"Below is a quick example for how your Plug can call the ",(0,r.kt)("inlineCode",{parentName:"p"},"connect")," method on Socket"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'    ISocket socket = ISocket(socket_address);\n\n    function connectToSocket(\n        uint32 siblingChainSlug,\n        address siblingPlug,\n        address inboundSwitchboard,\n        address outboundSwitchboard\n    ) external {\n        // ensure its permissioned\n        require(msg.sender == AUTHORISED_CONNECTOR, "Caller is not authorised to make make connections");\n\n        // finally just call the socket to connect \n        socket.connect(\n            siblingChainSlug,\n            siblingPlug,\n            inboundSwitchboard,\n            outboundSwitchboard\n        );\n  }\n')),(0,r.kt)("h2",{id:"testing-your-connection"},"Testing your connection"),(0,r.kt)("p",null,"Once you are done connecting, the transaction will emit a log called ",(0,r.kt)("inlineCode",{parentName:"p"},"PlugConnected")),(0,r.kt)("p",null,"For reference, checkout ",(0,r.kt)("a",{parentName:"p",href:"https://goerli.etherscan.io/tx/0x37040ec23ae744c8e4ea2961ceae8a4f32abaf04cc112c017089e95ceefb1653#eventlog"},"this example tx")," of connecting a Plug"),(0,r.kt)("img",{src:"/img/plug-connected.png"}),(0,r.kt)("p",null,"Furthermore, you can do the following to check the connection is successful :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Call the ",(0,r.kt)("inlineCode",{parentName:"li"},"getPlugConfig")," function on the Socket contract that returns the config for your Plug for a given destination ChainSlug"),(0,r.kt)("li",{parentName:"ul"},"Use the ",(0,r.kt)("a",{parentName:"li",href:"/dev-resources/APIReference/check-connection"},"Check Connection API")," that reads the configs and aids you to make sure your connection is correct")))}g.isMDXComponent=!0}}]);